{"ast":null,"code":"import _toConsumableArray from\"/home/mstuder/Develop/ILIAS/medi/ilias/Customizing/global/plugins/Services/UIComponent/UserInterfaceHook/SrCurriculum/src/Curriculum/Infrastructure/UI/tree/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/home/mstuder/Develop/ILIAS/medi/ilias/Customizing/global/plugins/Services/UIComponent/UserInterfaceHook/SrCurriculum/src/Curriculum/Infrastructure/UI/tree/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/mstuder/Develop/ILIAS/medi/ilias/Customizing/global/plugins/Services/UIComponent/UserInterfaceHook/SrCurriculum/src/Curriculum/Infrastructure/UI/tree/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/mstuder/Develop/ILIAS/medi/ilias/Customizing/global/plugins/Services/UIComponent/UserInterfaceHook/SrCurriculum/src/Curriculum/Infrastructure/UI/tree/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/mstuder/Develop/ILIAS/medi/ilias/Customizing/global/plugins/Services/UIComponent/UserInterfaceHook/SrCurriculum/src/Curriculum/Infrastructure/UI/tree/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'./styles.css';import Tree from'@naisutech/react-tree';var CurriculumTree=/*#__PURE__*/function(_React$Component){_inherits(CurriculumTree,_React$Component);var _super=_createSuper(CurriculumTree);function CurriculumTree(props){var _this;_classCallCheck(this,CurriculumTree);_this=_super.call(this,props);_this.onSelect=function(selectedNode){console.log(selectedNode);_this.setState({nodeIdToLoad:selectedNode.id});_this.setState({nodeDepthToLoad:selectedNode.depth});};var onSelect=function onSelect(){};_this.state={urlTreeService:document.getElementById('treeservice').textContent,nodeIdToLoad:document.getElementById('treeservice-nodeid').textContent,nodeDepthToLoad:1,loadedTreeNodeIds:[],nodesOfTree:[]};return _this;}_createClass(CurriculumTree,[{key:\"loadTreeSection\",value:function loadTreeSection(nodeIdToLoad,nodeDepthToLoad,loadedTreeNodeIds,nodesOfTree){var _this2=this;var params=new URLSearchParams();params.append('node_id',nodeIdToLoad);params.append('node_depth',nodeDepthToLoad);fetch(this.state.urlTreeService+\"&\"+params).then(function(res){return res.json();}).then(function(json){var tree_node;for(var i=0;i<json.length;i++){tree_node=json[i];_this2.state.nodesOfTree.push(tree_node);}_this2.setState({loadedTreeNodeIds:[].concat(_toConsumableArray(_this2.state.loadedTreeNodeIds),[nodeIdToLoad]),nodesOfTree:_this2.state.nodesOfTree});});}},{key:\"render\",value:function render(){var _this$state=this.state,urlTreeService=_this$state.urlTreeService,nodeIdToLoad=_this$state.nodeIdToLoad,nodeDepthToLoad=_this$state.nodeDepthToLoad,loadedTreeNodeIds=_this$state.loadedTreeNodeIds,nodesOfTree=_this$state.nodesOfTree;console.log(loadedTreeNodeIds);console.log(nodeIdToLoad);if(this.checkIfLoaded(loadedTreeNodeIds,nodeIdToLoad)===true){console.log(\"HEUREKA\");console.log(nodesOfTree);return/*#__PURE__*/React.createElement(\"div\",{className:\"showtree\",style:{display:'flex',flexWrap:'nowrap',flexGrow:1}},/*#__PURE__*/React.createElement(\"div\",{style:{width:'500px',display:'flex',flexDirection:'column'}},/*#__PURE__*/React.createElement(Tree,{nodes:nodesOfTree,showEmptyItems:true,size:\"half\",theme:'light',onSelect:this.onSelect})));}else{this.loadTreeSection(nodeIdToLoad,nodeDepthToLoad,loadedTreeNodeIds,nodesOfTree);return\"loading\";}}},{key:\"checkIfLoaded\",value:function checkIfLoaded(loadedTreeNodeIds,nodeIdToLoad){console.log(loadedTreeNodeIds);console.log(nodeIdToLoad);return loadedTreeNodeIds.indexOf(nodeIdToLoad)>=0;}}]);return CurriculumTree;}(React.Component);export default CurriculumTree;","map":{"version":3,"sources":["/home/mstuder/Develop/ILIAS/medi/ilias/Customizing/global/plugins/Services/UIComponent/UserInterfaceHook/SrCurriculum/src/Curriculum/Infrastructure/UI/tree/src/CurriculumTree.js"],"names":["React","Tree","CurriculumTree","props","onSelect","selectedNode","console","log","setState","nodeIdToLoad","id","nodeDepthToLoad","depth","state","urlTreeService","document","getElementById","textContent","loadedTreeNodeIds","nodesOfTree","params","URLSearchParams","append","fetch","then","res","json","tree_node","i","length","push","checkIfLoaded","display","flexWrap","flexGrow","width","flexDirection","loadTreeSection","indexOf","Component"],"mappings":"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","sourcesContent":["import React from 'react'\n\nimport './styles.css'\nimport Tree from '@naisutech/react-tree';\n\nclass CurriculumTree extends React.Component {\n\n\n  constructor(props) {\n    super(props)\n\n\n    const onSelect = () => {\n    }\n\n    this.state = {\n      urlTreeService: document.getElementById('treeservice').textContent,\n      nodeIdToLoad: document.getElementById('treeservice-nodeid').textContent,\n      nodeDepthToLoad: 1,\n      loadedTreeNodeIds: [],\n      nodesOfTree: []\n    }\n  }\n\n  loadTreeSection(nodeIdToLoad,\n                  nodeDepthToLoad,\n                  loadedTreeNodeIds,\n                  nodesOfTree) {\n\n    const params = new URLSearchParams()\n    params.append('node_id', nodeIdToLoad)\n    params.append('node_depth', nodeDepthToLoad)\n    fetch(this.state.urlTreeService + \"&\" + params).then(res => res.json())\n    .then(json => {\n      let tree_node\n      for(let i = 0; i < json.length; i++) {\n        tree_node =json[i];\n        this.state.nodesOfTree.push(tree_node);\n      }\n      this.setState({\n        loadedTreeNodeIds: [...this.state.loadedTreeNodeIds, nodeIdToLoad],\n        nodesOfTree: this.state.nodesOfTree\n      })\n    })\n  }\n\n  onSelect = (selectedNode) => {\n    console.log(selectedNode)\n    this.setState({ nodeIdToLoad: selectedNode.id })\n    this.setState({ nodeDepthToLoad: selectedNode.depth })\n  }\n\n\n  render() {\n    const { urlTreeService, nodeIdToLoad, nodeDepthToLoad, loadedTreeNodeIds, nodesOfTree } = this.state;\n    console.log(loadedTreeNodeIds)\n    console.log(nodeIdToLoad)\n    if (this.checkIfLoaded(loadedTreeNodeIds, nodeIdToLoad) === true) {\n      console.log(\"HEUREKA\")\n      console.log(nodesOfTree);\n      return (\n        <div className=\"showtree\" style={{ display: 'flex', flexWrap: 'nowrap', flexGrow: 1 }}>\n          <div style={{ width: '500px', display: 'flex', flexDirection: 'column' }}>\n            <Tree nodes={nodesOfTree} showEmptyItems size=\"half\" theme={'light'}\n                  onSelect={this.onSelect}/>\n          </div>\n        </div>\n      )\n    } else {\n      this.loadTreeSection(\n        nodeIdToLoad, nodeDepthToLoad, loadedTreeNodeIds, nodesOfTree\n      )\n      return \"loading\"\n    }\n  }\n\n\n  checkIfLoaded(loadedTreeNodeIds, nodeIdToLoad) {\n    console.log(loadedTreeNodeIds)\n    console.log(nodeIdToLoad)\n    return loadedTreeNodeIds.indexOf(nodeIdToLoad) >= 0\n  }\n\n}\n\nexport default CurriculumTree;\nCurriculumTree.propTypes = {}\n\n\n"]},"metadata":{},"sourceType":"module"}